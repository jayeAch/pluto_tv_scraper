- run: npm ci          # faster & more reliable in CI than npm install

      - name: Run Pluto TV Data Generator
        run: node index 2>&1 | tee generation.log

      - name: ğŸ› Full Debug â€“ What Actually Happened?
        run: |
          echo "ğŸ“ Working directory: $(pwd)"
          echo "ğŸ“‹ All files in root:"
          ls -la
          
          echo -e "\nğŸ” Searching for generated files (recursive):"
          find . -name "*.m3u*" -o -name "*.xml" | sort || echo "None found"
          
          echo -e "\nğŸ“Š Git status:"
          git status --short
          
          echo -e "\nğŸ—’ï¸  Last 30 lines of script output:"
          tail -30 generation.log

      - name: Commit & Push Updates (if any)
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Auto-update Pluto TV data [$(date +'%Y-%m-%d %H:%M')]"
          file_pattern: "*.m3u8 *.xml **/*.m3u8 **/*.xml"   # catches root + subdirs
          commit_user_name: GitHub Actions
          commit_user_email: actions@github.com
          commit_author: GitHub Actions <actions@github.com>
